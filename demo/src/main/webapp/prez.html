<!doctype html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <title>ScalaCompilerDoMatter</title>
   <meta name="description" content="Presentation on Scala Compiler features">
   <meta name="apple-mobile-web-app-capable" content="yes" />
   <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

   <link rel="stylesheet" href="css/reveal.css">
   <link rel="stylesheet" href="css/extension.css">
   <link rel="stylesheet" href="css/theme/sky.css" id="theme">

   <!-- For syntax highlighting -->
   <link rel="stylesheet" href="lib/css/zenburn.css">

   <!-- If the query includes 'print-pdf', use the PDF print sheet -->
   <script>document.write('<link rel="stylesheet" href="css/print/'
      + (window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper')
      + '.css" type="text/css" media="print">');
   </script>

   <!--[if lt IE 9]>
      <script src="lib/js/html5shiv.js"></script>
   <![endif]-->
   <style type="text/css" media="screen">
	 #codecontent { 
            background: #E3E4FA;
            display: inline-block;
            width: 100%;
            height: 620px;
            margin:0;
            padding:0;
	    text-align:left;

	    font-family: 'Monaco','Menlo','Ubuntu Mono','Consolas','source-code-pro',monospace;
         }

#codecontent .ace_cursor {
  border-left: 2px solid black;
}
 
      </style>
</head>

<body>
  <div class="reveal">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
      <section>
        <h2>Scala Compiler plugins</h2>
        <hr />
        <h3>Why they matter!</h3>
      </section>
      <section>
         <section>
            <h3>Let's start with a simple exemple</h3>
      	    <hr />
	 </section>
         <section>
            <h3>Let's consider that Java Code</h3>
	    <hr />
<pre><code>public class ImmutableClass {
   private String field1;
   private int    field2;

   public ImmutableClass(String f1, int f2) {
      field1 = f1;
      field2 = f2;
   }

   public String getField1() { return field1; }
   public int getField2()    { return field2; }
}</code>
</pre>
Pffeeeew ... much code
	 </section>
         <section>
            <h3>Let's make it simpler</h3>
	    <hr />
<pre><code>@Immutable class ImmutableClass {
   String field1;
   int    field2;
}</code>
</pre>
Ok much better
Thanks to Metaprogramming/AST in Groovy
	 </section>
         <section>
            <h3>Ok ... in Scala there are classes ;)</h3>
	    <hr />
<pre><code>case class ImmutableClass(val String field1, val Int field2)
</code>
</pre>
	 </section>
      </section>
      <section>
        <h1>Agenda</h1>
        <hr />
	<ol>
	  <li>Introduction</li>
          <li>Plumbing</li>
	  <li>Visiting the AST</li>
	  <li>Altering the AST</li>
	  <li>Let's see that in action</li>
          <li>Alternatives</li>
	  <li>Conclusion</li>
        </ol>
      </section>
<section>
MetaProgramming is not recent
</section>
<section>
A use case for this session
</section>
<section>
How to create Compiler plugins
</section>
<section>
How does the AST look like in Scala
show raw
Class ValDef
</section>
<section>
Manual
Visiting
</section>
<section>
Manual
Quasiquotes
Reify
</section>
      <section>
      <section>
        <h3>Let's see that in action</h3>
	</section>
      <section>
Explanations
      </section>
	<!--section>
        <iframe style="display: inline-block; width: 100%; height: 720px; vertical-align: top;" src="index.html"></iframe> 
        </section-->
        <section>
         <div style="display: inline-block; width: 54%; height: 100%; vertical-align: top;">
     <div style="text-align:left; font-size:0.8em">input:</div>
      <div id="codecontent" style="font-size:0.7em; line-height:100%" ></div></div>
      <div style="display: inline-block; width: 44%; height: 100%; vertical-align: top; margin-left:10px">
	      <div style="text-align:left ; font-size:0.8em">output:</div>
	      <pre id="output" style="font-size:0.7em; background-color: #eee; height: 282px; width: 100%; -moz-box-sizing: border-box; margin-bottom:1.5%; margin-top:0; overflow:scroll; line-height: 90%"></pre>
	      <div style="text-align:left; margin-top:2%; font-size:0.8em">status:</div>
	 <pre id="status" style="font-size:0.7em; background-color: #eee; height: 282px; width: 100%; -moz-box-sizing: border-box; margin-top:0; overflow:scroll; line-height: 90%"></pre>
      </div>
      <div style="text-align:left"><input style="font-size:0.6em" type="submit" onClick="submitContent()" value="eval" /></div>
        </section>
	</section>
	<section>
AST is too complex and error prone
Are there alternatives to solve the different use cases
Macros
JAAS
Traits
Futures
</section>
	<section>
	Conclusion:Do Scala Compiler really matter?Should I use them
			</section>
      <section>
        <h3>Further reading</h3>
        http://radar.oreilly.com/2011/09/java7-features.html
        http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-final.html
        https://www.youtube.com/watch?v=C_QbkGU_lqY
      </section>
      <section>
        <h3>Questions ?</h3>
      </section>
    <section>
       <h3>Thanks for your attention</h3>
       <p><small>Based on Reveal.js created by <a href="http://hakim.se">Hakim El Hattab</a> / <a href="http://twitter.com/hakimel">@hakimel</a></small></p>
       <p><small>Powered by vim: <a href="http://www.vim.org/">http://www.vim.org/</a></small></p>
    </section>
    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.js"></script>
  
  <script>
    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls : true,
      progress : true,
      history : true,
      center : true,

      theme : Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition : Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

      //config.width
      width: 1200,
      height: 800,

      // Optional libraries used to extend on reveal.js
      dependencies : [ {
        src : 'lib/js/classList.js',
        condition : function() {
          return !document.body.classList;
        }
      }, {
        src : 'plugin/markdown/marked.js',
        condition : function() {
          return !!document.querySelector('[data-markdown]');
        }
      }, {
        src : 'plugin/markdown/markdown.js',
        condition : function() {
          return !!document.querySelector('[data-markdown]');
        }
      }, {
        src : 'plugin/highlight/highlight.js',
        async : true,
        callback : function() {
          hljs.initHighlightingOnLoad();
        }
      }, {
        src : 'plugin/zoom-js/zoom.js',
        async : true,
        condition : function() {
          return !!document.body.classList;
        }
      }, {
        src : 'plugin/notes/notes.js',
        async : true,
        condition : function() {
          return !!document.body.classList;
        }
      } ]
    });
   </script>
   
     <script src="js/ace.js" type="text/javascript" charset="utf-8"></script>
      <script>
   var editor = ace.edit("codecontent");
   editor.setTheme("ace/theme/tomorrow");
   editor.getSession().setMode("ace/mode/scala");

   function submitContent() {
      var content='{content: '+JSON.stringify(editor.getValue())+'}'
      var xmlHttpReq = false;
      // Mozilla/Safari
      if (window.XMLHttpRequest) {
        xmlHttpReq = new XMLHttpRequest();
      }
      // IE
      else if (window.ActiveXObject) {
        xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
      }
  
      xmlHttpReq.onreadystatechange = function() {
      if (xmlHttpReq.readyState == 4) {
        var result = JSON.parse(xmlHttpReq.responseText);
        document.getElementById('output').innerHTML = result.output;
        document.getElementById('status').innerHTML = result.compilationStatus;
      }
    }     
    xmlHttpReq.open('POST', 'eval', true);
    xmlHttpReq.setRequestHeader('Content-Type', 'application/json');
    xmlHttpReq.send(content);
}
      </script>
</body>
</html>
