<!DOCTYPE html>
<html lang="en">
   <head>
      <style type="text/css" media="screen">
         #codecontent { 
            display: inline-block;
            width: 55%;
            height: 600px;
            margin:0;
            padding:0;
         }
      </style>
   </head>
   <body>
      <div id="codecontent">val i = 10
def f(i:Int) = i+1
f(i)</div>
      <div style="display: inline-block; width: 44%; height: 600px; vertical-align: top;">
         <textarea id="output" class="codeoutput" style="height: 48%; width: 100%; -moz-box-sizing: border-box; margin-bottom:2%;" readonly></textarea>
         <textarea id="status" class="codeoutput" style="height: 48%; width: 100%; -moz-box-sizing: border-box; margin-top:2%;" readonly></textarea>
      </div>
      <div style="text-align:left"><input type="submit" onClick="submitContent()" value="eval" /></div>
      
      <script src="js/ace.js" type="text/javascript" charset="utf-8"></script>
      <script>
   var editor = ace.edit("codecontent");
   editor.setTheme("ace/theme/monokai");
   editor.getSession().setMode("ace/mode/scala");

   function submitContent() {
      var content='{content: '+JSON.stringify(editor.getValue())+'}'
      var xmlHttpReq = false;
      // Mozilla/Safari
      if (window.XMLHttpRequest) {
        xmlHttpReq = new XMLHttpRequest();
      }
      // IE
      else if (window.ActiveXObject) {
        xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
      }
  
      xmlHttpReq.onreadystatechange = function() {
      if (xmlHttpReq.readyState == 4) {
        var result = JSON.parse(xmlHttpReq.responseText);
        document.getElementById('output').innerHTML = result.output;
        document.getElementById('status').innerHTML = result.compilationStatus;
      }
    }     
    xmlHttpReq.open('POST', 'eval', true);
    xmlHttpReq.setRequestHeader('Content-Type', 'application/json');
    xmlHttpReq.send(content);
}
      </script>
   </body>
</html>
